<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Flocking Simulation</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				margin: 0px;
				overflow: hidden;
				cursor: pointer;
			}
		</style>
	</head>
	<body>
		<div id="info">
		 <span id="birds"></span>
		 </div>

		<script src="js-libs/three.js"></script>
		<script src="js-libs/Detector.js"></script>
		<script src="js-libs/stats.min.js"></script>
		<script src="js-libs/dat.gui.min.js"></script>
		<script src="js-libs/GPUComputationRenderer.js"></script>
		<script src="js-libs/FirstPersonControls.js"></script>
		<script src="js-libs/OrbitControls.js"></script>
		<script src="js-libs/KeyboardState.js"></script>

		<!-- fragment shader for bird's position -->
		<script id="BoidPositionFragmentShader" type="x-shader/x-fragment">
			uniform float clock;
			uniform float del_change;
			void main()	{
				vec2 textcoordi = gl_FragCoord.xy / resolution.xy;
				vec4 temp_position = texture2D( PositionTexture, textcoordi );
				vec3 position = temp_position.xyz;
				vec3 velocity = texture2D( VeloctiyTexture, textcoordi ).xyz;

				float wcoordinate = temp_position.w;

				wcoordinate = mod( ( wcoordinate + del_change*2.0 +
					length(velocity.xz) * del_change * 3. +
					max(velocity.y, 0.0) * del_change * 6. ), 50.0 );

				gl_FragColor = vec4( position + velocity * del_change * 15. , wcoordinate );}
		</script>

		<!-- fragment shader for bird's geometry -->
		<script id="BoidGeometryFragmentShader">
			varying vec4 vertex_color;
			varying float zcoordi;

			void main() {
				float z = 0.2 + ( 1000. - zcoordi ) / 1000. * vertex_color.x;
				gl_FragColor = vec4( z, z, z, 1. );}
		</script>

	</body>
</html>